class ThemePreloader{constructor(){this.cache=new Map();this.loading=new Set();this.preloadQueue=[];this.isPreloading=!1}preloadThemes(e){this.preloadQueue=e;this.isPreloading||this.startPreloading()}startPreloading(){this.isPreloading=!0;this.preloadNext()}preloadNext(){if(0===this.preloadQueue.length){this.isPreloading=!1;console.log('âœ… All themes preloaded');return}const e=this.preloadQueue.shift();this.preloadTheme(e).then(()=>{setTimeout(()=>this.preloadNext(),100)}).catch(t=>{console.error(`Failed to preload ${e}:`,t);setTimeout(()=>this.preloadNext(),100)})}preloadTheme(e){return new Promise((t,s)=>{if(this.cache.has(e))return t();if(this.loading.has(e))return this.loading.get(e).then(t,s);console.log(`ğŸ¨ Preloading theme: ${e}`);const n=document.createElement('link');n.rel='preload';n.as='style';n.href=e;n.onload=()=>{console.log(`âœ… Theme preloaded: ${e}`);this.cache.set(e,!0);this.loading.delete(e);t()};n.onerror=()=>{this.loading.delete(e);s(new Error(`Failed to load ${e}`))};this.loading.add(e);document.head.appendChild(n)})}getTheme(e){return this.cache.has(e)}clearCache(){this.cache.clear();this.loading.clear();console.log('ğŸ—‘ï¸ Theme cache cleared')}}window.themePreloader=new ThemePreloader;
